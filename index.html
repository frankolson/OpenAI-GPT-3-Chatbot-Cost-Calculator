<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>OpenAI GPT-3 Chatbot Cost Calculator</title>
  <link rel="stylesheet" href="https://unpkg.com/mvp.css@1.12/mvp.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <main>
    <section>
      <header>
        <h1>OpenAI GPT-3 Chatbot Cost Calculator</h1>
        <p>
          A tool for estimating the costs incurred from OpenAI charges using the GPT-3 model for a chatbot.
        </p>
      </header>
    </section>
    
    <section>
      <form id="calculatorForm">
        <div class="form-group">
          <label for="promptSize">Static prompt tokens:</label>
          <input type="number" name="promptSize" value="200">
          <div class="info"> 
            The number of tokens for the text often injected into the prompt along with the user's message before it gets sent to OpenAI.
          </div>
        </div>

        <div class="form-group">
          <label for="inputSize">Average user tokens:</label>
          <input type="number" name="inputSize" value="50">
          <div class="info"> 
            The average tokens of a user's message to the chatbot.
          </div>
        </div>

        <div class="form-group">
          <label for="maxToken">Max total tokens:</label>
          <input type="number" name="maxToken" value="300">
          <div class="info">
            The maximum number of tokens that will be processed by the OpenAI API. This is a sum of the prompt, user, and response token count.
          </div>
          </div>
        </div>

        <div class="calculation-box">
          <b>Calculated response tokens:</b><br />
          <span id="responseSize">Calculating...</span>
          <div class="info">
            This is calculated by subtracting the static prompt size and average input from the max tokens to determine what is left over for the OpenAI response. If you don't leave enough space for the OpenAI response, the chatbot response will often just be chopped short.
          </div>
        </div>

        <div class="form-group">
          <label for="interactionSize">Interactions per conversation:</label>
          <input type="number" name="interactionSize" value="10">
          <div class="info">
            An interacton is a single user message to the chatbot plus the chatbot's response. This field is the average length of a single converstaion with the chatbot.
          </div>
        </div>

        <div class="form-group">
          <label for="conversationSize">Conversations per day:</label>
          <input type="number" name="conversationSize" value="10">
          <div class="info">
            This is how many times a chatbot will be used in a single day.
          </div>
        </div>

        <div class="form-group">
          <label for="languageModel">Model:</label>
          <select name="languageModel">
            <option value="davinci" selected>Davinci ($0.02 / 1k tokens)</option>
            <option value="currie">Currie ($0.002 / 1k tokens)</option>
            <option value="babbage">Babbage ($0.0005 / 1k tokens)</option>
            <option value="ada">Ada ($0.0004 / 1k tokens)</option>
          </select>
          <div class="info">
            More information on the available models and their associated pricing can be found here: <a href="https://openai.com/api/pricing/">https://openai.com/api/pricing/</a>
          </div>
        </div>

        <!-- A table with a header column using the following values: interactions per day, cost per interaction, monthly cost -->
        <div class="calculation-box">
          <b>Calculated monthly usage and costs:</b><br />
          <table>
            <tr>
              <th>Interactions per day</th>
              <td id="calculatedInteractionsCount">Calculating...</td>
            </tr>
            <tr>
              <th>Cost per interaction</th>
              <td id="calculatedInteractionsCost">Calculating...</td>
            </tr>
            <tr>
              <th>Monthly interactions</th>
              <td id="monthlyInteractions">Calculating...</td>
            </tr>
            <tr>
              <th>Monthly cost</th>
              <td id="calculatedMonthlyCost">Calculating...</td>
            </tr>
          </table>
        </div>
      </form>
    </section>

    <hr />

    <section>
      <header>
        <h2>Conversation Examples</h2>
      </header>
      
      <aside>
        <h3>What the user sees</h3>

        <div id="conversationExample">
          <p>
            Calculating...
          </p>
        </div>
      </aside>

      <aside>
        <h3>What's submitted to OpenAI</h3>

        <div id="conversationPromptExample">
          <p>
            Calculating...
          </p>
        </div>
      </aside>
    </section>
  </main>

<!--   <script src="https://unpkg.com/jquery@1.12/dist/jquery.min.js"></script> -->
  <script type="module" src="script.js"></script>

 <!--
  This script places a badge on your repl's full-browser view back to your repl's cover
  page. Try various colors for the theme: dark, light, red, orange, yellow, lime, green,
  teal, blue, blurple, magenta, pink!
  -->
  <script src="https://replit.com/public/js/replit-badge.js" theme="blue" defer></script> 

  <!-- 100% privacy friendly analytics -->
  <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
  <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript>
</body>

</html>
